# Project Board

> **Generated by `keystone-board` skill**
> **Last Updated:** 2025-12-25 14:31

## Active Workstreams

| Workstream | Feature Plan | Session Name | Status |
| :--- | :--- | :--- | :--- |
| ``infrastructure`` | `keystone/project/workstreams/infrastructure.md` | ``root-session`` | `Active` |
| ``data-engine`` | `keystone/project/workstreams/data-engine.md` | ``root-session`` | `Active` |
| ``frontend`` | `keystone/project/workstreams/frontend.md` | ``PP-UI-main`` | `Active` |
| ``sqlite-migration`` | `keystone/project/workstreams/sqlite-migration.md` | ``root-session`` | `Active` |
| ``tailwind-migration-fix`` | `keystone/project/workstreams/tailwind-migration-fix.md` | ``PP-UI-main`` | `Done` |
| ``beautiful-logs`` | `keystone/project/workstreams/beautiful_logs.md` | ``AutoFeedback`` | `Active` |
| ``prism-refactor`` | `keystone/project/workstreams/prism_refactor.md` | ``None`` | `Backlog` |
| ``pipeline-progress-ux`` | `keystone/project/workstreams/pipeline-progress-ux.md` | ``Pipeline Optimization`` | `Active` |
| ``hive-extension`` | `keystone/strategy/HIVE_EXTENSION_STRATEGY.md` | ``OptiPie`` | `Active` |

## Progress Overview

| Total | Open | In Progress | Blocked | Done |
| :--- | :--- | :--- | :--- | :--- |
| 144 | 3 | 0 | 29 | 112 |

**Overall Progress:** [███████████████░░░░░] 77%

---

## Blocked
- [ ] **HIVE-601:** Delete AssetUniverse class `[hive-extension]` (Deps: DECOUPLE-009 (production verified))
- [ ] **HIVE-602:** Remove CSV from migration.py `[hive-extension]` (Deps: HIVE-601)
- [ ] **HIVE-603:** Remove feature flag `[hive-extension]` (Deps: HIVE-602)
- [ ] **HIVE-604:** Delete deprecated files `[hive-extension]` (Deps: HIVE-603)
- [ ] **HIVE-605:** Final documentation update `[hive-extension]` (Deps: HIVE-604)
- [ ] **XRAY-002:** Update broadcast_progress() to use stored loop reference `[frontend]` (Deps: XRAY-001)
- [ ] **XRAY-003:** Add fallback logging when broadcast fails `[frontend]` (Deps: XRAY-002)
- [ ] **XRAY-004:** Verify SSE events flow end-to-end `[frontend]` (Deps: XRAY-003)
- [ ] **XRAY-005:** Add holdings count to loading phase message `[frontend]` (Deps: XRAY-004)
- [ ] **XRAY-006:** Add per-ETF progress during decomposition `[frontend]` (Deps: XRAY-004)
- [ ] **XRAY-007:** Add resolution summary after decomposition `[frontend]` (Deps: XRAY-004)
- [ ] **XRAY-008:** Add enrichment source breakdown `[frontend]` (Deps: XRAY-004)
- [ ] **XRAY-009:** Add unique securities count in aggregation `[frontend]` (Deps: XRAY-004)
- [ ] **XRAY-010:** Define pipeline_summary SSE event schema `[frontend]` (Deps: XRAY-004)
- [ ] **XRAY-011:** Collect resolution stats from Decomposer `[frontend]` (Deps: XRAY-010)
- [ ] **XRAY-012:** Collect unresolved ISINs list `[frontend]` (Deps: XRAY-011)
- [ ] **XRAY-013:** Emit summary event at pipeline completion `[frontend]` (Deps: XRAY-012)
- [ ] **XRAY-014:** Update usePipelineProgress hook to handle summary `[frontend]` (Deps: XRAY-013)
- [ ] **XRAY-015:** Add summary state to usePipelineProgress hook `[frontend]` (Deps: XRAY-014)
- [ ] **XRAY-016:** Create PipelineSummaryCard component `[frontend]` (Deps: XRAY-015)
- [ ] **XRAY-017:** Add resolution success rate badge `[frontend]` (Deps: XRAY-015)
- [ ] **XRAY-018:** Create collapsible unresolved ISINs list `[frontend]` (Deps: XRAY-015)
- [ ] **XRAY-019:** Add phase timing breakdown display `[frontend]` (Deps: XRAY-015)
- [ ] **XRAY-020:** Integrate summary card into XRayView `[frontend]` (Deps: XRAY-016, XRAY-017, XRAY-018, XRAY-019)
- [ ] **XRAY-021:** Unit tests for SSE broadcast fix `[frontend]` (Deps: XRAY-020)
- [ ] **XRAY-022:** Integration test - progress events flow `[frontend]` (Deps: XRAY-020)
- [ ] **XRAY-023:** Test with large portfolio (1000+ holdings) `[frontend]` (Deps: XRAY-020)
- [ ] **XRAY-024:** Test reconnection during pipeline run `[frontend]` (Deps: XRAY-020)
- [ ] **XRAY-025:** Update pipeline-progress-ux workstream docs `[frontend]` (Deps: XRAY-024)

---

## In Progress

*None.*

---

## Open
- [ ] **BUG-003:** `contribute_alias` missing error logging `[main]`
- [ ] **XRAY-001:** Store main event loop reference at FastAPI startup `[frontend]`
- [ ] **TASK-612:** Implement Async I/O for Adapters. `[data-engine]`

---

## Backlog

*None.*

---

## Done
- [x] **HIVE-001:** Audit current RLS policies `[hive-extension]`
- [x] **HIVE-002:** Create `resolve_ticker_rpc` function `[hive-extension]` (Deps: HIVE-001)
- [x] **HIVE-003:** Create `batch_resolve_tickers_rpc` function `[hive-extension]` (Deps: HIVE-001)
- [x] **HIVE-004:** Create `lookup_alias_rpc` function `[hive-extension]` (Deps: HIVE-005)
- [x] **HIVE-005:** Add `aliases` table migration `[hive-extension]`
- [x] **HIVE-006:** Create `contribute_alias` RPC `[hive-extension]` (Deps: HIVE-005)
- [x] **HIVE-007:** Verify RLS fix works `[hive-extension]` (Deps: HIVE-002, HIVE-003)
- [x] **HIVE-101:** Add `resolve_ticker()` method `[hive-extension]` (Deps: HIVE-007)
- [x] **HIVE-102:** Add `batch_resolve_tickers()` method `[hive-extension]` (Deps: HIVE-007)
- [x] **HIVE-103:** Add `lookup_by_alias()` method `[hive-extension]` (Deps: HIVE-007)
- [x] **HIVE-104:** Add `sync_identity_domain()` method `[hive-extension]` (Deps: HIVE-101)
- [x] **HIVE-105:** Unit tests for HiveClient read methods `[hive-extension]` (Deps: HIVE-101, HIVE-102, HIVE-103)
- [x] **HIVE-201:** Create LocalCache SQLite schema `[hive-extension]` (Deps: HIVE-005)
- [x] **HIVE-202:** Implement LocalCache CRUD operations `[hive-extension]` (Deps: HIVE-201)
- [x] **HIVE-203:** Implement sync logic `[hive-extension]` (Deps: HIVE-202, HIVE-104)
- [x] **HIVE-204:** Implement staleness check `[hive-extension]` (Deps: HIVE-203)
- [x] **HIVE-205:** Unit tests for LocalCache `[hive-extension]` (Deps: HIVE-202, HIVE-203, HIVE-204)
- [x] **HIVE-301:** Add `USE_LEGACY_CSV` feature flag `[hive-extension]`
- [x] **HIVE-302:** Refactor ISINResolver with dual path `[hive-extension]` (Deps: HIVE-301, HIVE-105, HIVE-205)
- [x] **HIVE-303:** Implement Hive-first resolution chain `[hive-extension]` (Deps: HIVE-302)
- [x] **HIVE-304:** Implement push-to-Hive on API success `[hive-extension]` (Deps: HIVE-303)
- [x] **HIVE-305:** Implement tiered resolution `[hive-extension]` (Deps: HIVE-303)
- [x] **HIVE-306:** Unit tests for ISINResolver refactor `[hive-extension]` (Deps: HIVE-302, HIVE-303, HIVE-304)
- [x] **HIVE-401:** Inject ISINResolver into Decomposer `[hive-extension]` (Deps: HIVE-306)
- [x] **HIVE-402:** Call resolver after adapter fetch `[hive-extension]` (Deps: HIVE-401)
- [x] **HIVE-403:** Add resolution stats logging `[hive-extension]` (Deps: HIVE-402)
- [x] **HIVE-404:** Integration test for X-Ray pipeline `[hive-extension]` (Deps: HIVE-402)
- [x] **DECOUPLE-001:** Remove pipeline auto-trigger from sync handler `[hive-extension]`
- [x] **DECOUPLE-002:** Update sync tests `[hive-extension]` (Deps: DECOUPLE-001)
- [x] **DECOUPLE-003:** Change USE_LEGACY_CSV default to false `[hive-extension]`
- [x] **DECOUPLE-004:** Simplify AmundiAdapter (remove Playwright) `[hive-extension]`
- [x] **DECOUPLE-005:** Simplify VanguardAdapter (remove Playwright) `[hive-extension]`
- [x] **DECOUPLE-006:** Delete browser.py `[hive-extension]` (Deps: DECOUPLE-004, DECOUPLE-005)
- [x] **DECOUPLE-007:** Update adapter error handling `[hive-extension]` (Deps: DECOUPLE-006)
- [x] **DECOUPLE-008:** Run test suite `[hive-extension]` (Deps: DECOUPLE-001, DECOUPLE-002, DECOUPLE-003)
- [x] **DECOUPLE-009:** Live integration test `[hive-extension]` (Deps: DECOUPLE-008)
- [x] **TASK-801:** Create `portfolio_src/core/schema.py` (Pandera Contracts). `[sqlite-migration]`
- [x] **TASK-802:** Implement `portfolio_src/data/ingestion.py` (Validated Ingestion). `[sqlite-migration]`
- [x] **TASK-803:** Refactor `database.py` (WAL Mode & Strict Schemas). `[sqlite-migration]`
- [x] **TASK-804:** Integrate Hive Sync with SQLite Ingestion. `[sqlite-migration]`
- [x] **TASK-805:** Refactor Pipeline to SQLite SSOT & Cleanup CSVs. `[sqlite-migration]`
- [x] **TASK-806:** Create one-time migration script `scripts/migrate_v0_to_v1.py`. `[sqlite-migration]`
- [x] **BUG-001:** Unreachable code in `pipeline.py` `[main]`
- [x] **BUG-002:** `batch_resolve_tickers_rpc` non-deterministic results `[main]`
- [x] **TMF-001:** Uninstall Tailwind v4 packages `[tailwind-migration-fix]`
- [x] **TMF-002:** Install Tailwind v3 packages `[tailwind-migration-fix]` (Deps: TMF-001)
- [x] **TMF-003:** Verify Configuration Files `[tailwind-migration-fix]` (Deps: TMF-002)
- [x] **TMF-004:** Verify CSS Entry Point `[tailwind-migration-fix]` (Deps: TMF-003)
- [x] **TMF-005:** Verify Build `[tailwind-migration-fix]` (Deps: TMF-004)
- [x] **SSE-001:** Create SSE endpoint in Echo-Bridge `[pipeline-progress-ux]`
- [x] **SSE-002:** Implement broadcast mechanism `[pipeline-progress-ux]` (Deps: SSE-001)
- [x] **SSE-003:** Update emit_progress to broadcast `[pipeline-progress-ux]` (Deps: SSE-002)
- [x] **SSE-004:** Add connection lifecycle handling `[pipeline-progress-ux]` (Deps: SSE-001)
- [x] **SSE-005:** Add portfolio summary to loading phase `[pipeline-progress-ux]` (Deps: SSE-003)
- [x] **SSE-006:** Add per-ETF progress in decomposition `[pipeline-progress-ux]` (Deps: SSE-003)
- [x] **SSE-007:** Add enrichment progress `[pipeline-progress-ux]` (Deps: SSE-003)
- [x] **SSE-008:** Add aggregation progress `[pipeline-progress-ux]` (Deps: SSE-003)
- [x] **SSE-009:** Create usePipelineProgress hook `[pipeline-progress-ux]` (Deps: SSE-001)
- [x] **SSE-010:** Handle connection lifecycle `[pipeline-progress-ux]` (Deps: SSE-009)
- [x] **SSE-011:** Add reconnection logic `[pipeline-progress-ux]` (Deps: SSE-009)
- [x] **SSE-012:** Create PipelineProgressCard component `[pipeline-progress-ux]` (Deps: SSE-009)
- [x] **SSE-013:** Integrate into XRayView `[pipeline-progress-ux]` (Deps: SSE-012)
- [x] **SSE-014:** Add progress bar animation `[pipeline-progress-ux]` (Deps: SSE-012)
- [x] **SSE-015:** Add phase indicators `[pipeline-progress-ux]` (Deps: SSE-012)
- [x] **SSE-016:** Test SSE connection lifecycle `[pipeline-progress-ux]` (Deps: SSE-013)
- [x] **SSE-017:** Test with slow network `[pipeline-progress-ux]` (Deps: SSE-013)
- [x] **SSE-018:** Add loading skeleton during init `[pipeline-progress-ux]` (Deps: SSE-012)
- [x] **SSE-019:** Handle edge cases `[pipeline-progress-ux]` (Deps: SSE-013)
- [x] **TASK-615:** Implement Incremental Builds (Remove --clean). `[infrastructure]`
- [x] **TASK-616:** Parallelize Spec Builds in `build-python.sh`. `[infrastructure]`
- [x] **TASK-617:** Implement Change Detection (Hash-based skip). `[infrastructure]`
- [x] **TASK-611:** Add Pipeline Health Monitoring (Observability). `[infrastructure]`
- [x] **TASK-501:** Verify PII Scrubber implementation in Rust. `[infrastructure]`
- [x] **TASK-403:** Test Cloudflare Worker integration for crash reporting. `[infrastructure]`
- [x] **TASK-001:** Archive Legacy Dashboard Code. `[infrastructure]`
- [x] **TASK-003:** Scaffold React Environment. `[infrastructure]`
- [x] **TASK-503:** UV Migration. `[infrastructure]`
- [x] **TASK-701:** Implement Echo-Bridge (Unified FastAPI Sidecar). `[data-engine]`
- [x] **TASK-702:** Implement Redacted Reporter (PII Scrubbing + GitHub Relay). `[data-engine]`
- [x] **TASK-703:** Integrate Echo UI (Status Badge + Opt-out Toggle). `[data-engine]`
- [x] **TASK-609:** Implement Confidence Scoring Logic (Trust Metrics). `[data-engine]`
- [x] **TASK-610:** Vectorize Aggregator Math (Performance). `[data-engine]`
- [x] **TASK-451:** Finalize Hive Schema & Generate SQL. `[data-engine]`
- [x] **TASK-452:** Implement Hive Client (Read/Write). `[data-engine]`
- [x] **TASK-602:** Implement HiveEnrichmentService. `[data-engine]`
- [x] **TASK-603:** Integrate market.py with Hive. `[data-engine]`
- [x] **TASK-604:** Implement Asset Universe Sync. `[data-engine]`
- [x] **TASK-606:** Implement ETF Holdings Query & Hive Contribution. `[data-engine]`
- [x] **TASK-601:** Fix Pipeline Type & Import Errors. `[data-engine]`
- [x] **TASK-605:** Rigorous Pipeline Testing (44/44 tests passed). `[data-engine]`
- [x] **TASK-607:** Implement Smart Manual Upload (XLSX support + Heuristics). `[data-engine]`
- [x] **TASK-LOG-001:** Create `scripts/prism.py` Orchestrator with `rich` UI. `[beautiful-logs]`
- [x] **TASK-LOG-002:** Implement Rust-Python Log Bridge (Level Mapping). `[beautiful-logs]`
- [x] **TASK-LOG-003:** Suppress Noisy 3rd Party Libraries (yfinance, httpx). `[beautiful-logs]`
- [x] **TASK-LOG-004:** Implement Live Build Progress Bars (Milestone Mapping). `[beautiful-logs]`
- [x] **TASK-LOG-005:** Add System Prerequisite Check. `[beautiful-logs]`
- [x] **TASK-LOG-006:** Cleanup Legacy Shell Scripts. `[beautiful-logs]`
- [x] **TASK-LOG-008:** Codify Logging Standards in `keystone/standards/python.md`. `[beautiful-logs]`
- [x] **TASK-LOG-009:** Implement `PrismFormatter` (The Face). `[beautiful-logs]`
- [x] **TASK-LOG-010:** Global Interception (Uvicorn & Stdout). `[beautiful-logs]`
- [x] **TASK-LOG-011:** Rust Handshake Refinement. `[beautiful-logs]`
- [x] **TASK-LOG-007:** Enhance GitHub Feedback Issues with rich metadata and structured formatting. `[beautiful-logs]`
- [x] **TASK-SENTINEL-001:** Update `system_logs` schema (Foundation). `[beautiful-logs]`
- [x] **TASK-SENTINEL-002:** Enhance `SQLiteLogHandler` (Foundation). `[beautiful-logs]`
- [x] **TASK-SENTINEL-003:** Wire up Global Error Hooks (Foundation). `[beautiful-logs]`
- [x] **TASK-SENTINEL-004:** Create `prism_utils/sentinel.py` (Sentinel). `[beautiful-logs]`
- [x] **TASK-SENTINEL-005:** Implement Reporting Logic (Sentinel). `[beautiful-logs]`
- [x] **TASK-SENTINEL-006:** Startup Integration (Sentinel). `[beautiful-logs]`
- [x] **TASK-SENTINEL-007:** Add `/report` endpoint to Worker (Cloudflare). `[beautiful-logs]`
- [x] **TASK-SENTINEL-008:** Implement Deduplication (Cloudflare). `[beautiful-logs]`
- [x] **TASK-SENTINEL-009:** Telemetry Settings (UI). `[beautiful-logs]`
- [x] **TASK-SENTINEL-010:** Health Dashboard UI (UI). `[beautiful-logs]`

---

## Source Map
- `keystone/project/workstreams/beautiful_logs.md`
- `keystone/project/workstreams/bug-fixes.md`
- `keystone/project/workstreams/data-engine.md`
- `keystone/project/workstreams/frontend.md`
- `keystone/project/workstreams/hive-extension.md`
- `keystone/project/workstreams/infrastructure.md`
- `keystone/project/workstreams/pipeline-progress-ux.md`
- `keystone/project/workstreams/sqlite-migration.md`
- `keystone/project/workstreams/tailwind-migration-fix.md`
- `keystone/plans/PIPELINE_TRANSPARENCY_PLAN.md`